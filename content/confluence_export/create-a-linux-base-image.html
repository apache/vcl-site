<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>


  <link href="/css/vcl.css" rel="stylesheet" type="text/css">
  <link href="/css/code.css" rel="stylesheet" type="text/css">
  <title>Apache VCL - Create a Linux Base Image</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
  <div id="sitetitle">
    <table width="100%" border="0" cellspacing="0" cellpadding="5">
      <tr>
         <td><a href="/index.html"><img src="/img/vcl-logo.png" height="100" align="left" alt="Apache VCL logo"></a></td>
         <td><a href="http://www.apache.org"><img src="/img/asf-logo.png" align="right" alt="Apache Software Foundation logo"></a></td>
      </tr>
    </table>
  </div>
  
  <div id="left-column">
    <div id="navigation">
      <ul>
<li><a href="/index.html">Information</a>
<ul>
<li><a href="/info/features.html">Features</a></li>
<li><a href="/info/architecture.html">Architecture</a></li>
<li><a href="/downloads/download.cgi">Download</a></li>
<li><a href="http://www.apache.org/licenses/">License</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
</li>
<li><a href="/docs/index.html">Documentation</a>
<ul>
<li><a href="https://cwiki.apache.org/confluence/x/yQdG">Using VCL</a></li>
<li><a href="https://cwiki.apache.org/confluence/x/ywdG">Administration</a></li>
<li><a href="/docs/installation.html">Installation</a></li>
</ul>
</li>
<li><a href="https://cwiki.apache.org/confluence/display/VCL/Apache+VCL" target="_blank">Confluence Wiki</a>
  <ul>
      <li></li>
  </ul>
</li>
<li><a href="https://issues.apache.org/jira/browse/VCL" target="_blank">Jira Issue Tracking</a>
  <ul>
      <li></li>
  </ul>
</li>
<li><a href="/comm/index.html">Community</a>
<ul>
<li><a href="/comm/index.html#getInvolved">Getting Involved</a></li>
<li><a href="/comm/index.html#mail-list">Mailing Lists</a></li>
<li><a href="/dev/index.html">Development</a>
<ul>
<li><a href="/dev/code-documentation.html">Code Documentation</a></li>
<li><a href="/dev/roadmap.html">Roadmap</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://www.apache.org">Apache Software Foundation</a>
<ul>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
</ul>
</li>
</ul>
    </div>
    <div id="current-event"> 
      <a  href="https://www.apache.org/events/current-event.html">
        <img src="https://www.apache.org/events/current-event-125x125.png" alt="Apache current event" />
      </a>
    </div>
  </div>
  
  <div id="content">
    <h1 class="title">Create a Linux Base Image</h1>
    
	<p>{excerpt}This page describes how to create a Linux base image.{excerpt}</p>
<p><a name="CreateaLinuxBaseImage-Requirements"></a></p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>Computer being captured has been added to the VCL database</li>
<li>Computer has been installed with Linux</li>
<li>Two network adapters are enabled on the computer:
** eth0 - connected to the private network
** eth1 - connected to the public network</li>
<li>The ability to log in as root via SSH using an identity key on the
private network from management node</li>
</ul>
<p><a name="CreateaLinuxBaseImage-ConfigureSSHIdentityKeyAuthentication"></a></p>
<h3 id="configure-ssh-identity-key-authentication">Configure SSH Identity Key Authentication</h3>
<ol>
<li>On the Linux computer being captured, create a /root/.ssh directory:
{tip}mkdir /root/.ssh{tip}</li>
<li>On the management node, copy the public SSH identity key to the
authorized_keys file on the Linux computer being captured:
{tip}scp /etc/vcl/vcl.key.pub <hostname or IP
address>:/root/.ssh/authorized_keys{tip}</li>
<li>Or replace the above two steps with the following on the management node:
{tip}ssh-copy-id -i /etc/vcl/vcl.key <hostname or IP address>{tip}</li>
<li>Make sure you can login from the management node to the Linux computer
being captured using the identity key:
{tip}ssh -i /etc/vcl/vcl.key <hostname or IP address>{tip}</li>
</ol>
<p><a name="CreateaLinuxBaseImage-Configuretheifcfg-\*Files"></a></p>
<h3 id="configure-the-ifcfg--files">Configure the ifcfg-* Files</h3>
<ol>
<li>
<p>Navigate to the network-scripts directory:
{tip}cd /etc/sysconfig/network-scripts{tip}</p>
</li>
<li>
<p>Delete any ifcfg-<em>.bak files:
{tip}rm -f /etc/sysconfig/network-scripts/ifcfg-</em>.bak{tip}</p>
</li>
<li>
<p>Edit every ifcfg-eth* file in the network-scripts directory. Remove the
<em>HWADDRESS=</em> line:
{tip}vi ifcfg-eth0{tip}
{tip}vi ifcfg-eth1{tip}
The ifcfg-eth0 file should contain the following:</p>
<p>DEVICE=eth0
BOOTPROTO=dhcp
ONBOOT=yes</p>
</li>
</ol>
<p>The ifcfg-eth1 file should contain the following:</p>
<pre><code>DEVICE=eth1
BOOTPROTO=dhcp
ONBOOT=yes
</code></pre>
<ol>
<li>Reboot the computer:
{tip}shutdown -r now{tip}</li>
<li>Check the ifcfg-eth* files to make sure there are no ifcfg-eth* files
and that the HWADDRESS= lines have not been automatically added back:
{tip}
ls /etc/sysconfig/network-scripts
{tip}
{tip}
cat /etc/sysconfig/network-scripts/ifcfg-eth0
{tip}
{tip}
cat /etc/sysconfig/network-scripts/ifcfg-eth1
{tip}</li>
</ol>
<p>{include:Capture A Base Image}</p>


  </div>
  
  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2020 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache and the Apache feather logo are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>
  
</body>
</html>
