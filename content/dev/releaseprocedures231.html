<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>


  <link href="/css/vcl.css" rel="stylesheet" type="text/css">
  <link href="/css/code.css" rel="stylesheet" type="text/css">
  <title>Apache VCL - VCL Release Procedures - 2.3.1 ToDo</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body>
  <div id="sitetitle">
    <table width="100%" border="0" cellspacing="0" cellpadding="5">
      <tr>
         <td><a href="/index.html"><img src="/img/vcl-logo.png" height="100" align="left" alt="Apache VCL logo"></a></td>
         <td><a href="http://www.apache.org"><img src="/img/asf-logo.png" align="right" alt="Apache Software Foundation logo"></a></td>
      </tr>
    </table>
  </div>
  
  <div id="left-column">
    <div id="navigation">
      <ul>
<li><a href="/index.html">Information</a>
<ul>
<li><a href="/info/features.html">Features</a></li>
<li><a href="/info/architecture.html">Architecture</a></li>
<li><a href="/downloads/download.cgi">Download</a></li>
<li><a href="http://www.apache.org/licenses/">License</a></li>
<li><a href="http://www.apache.org/security/">Security</a></li>
</ul>
</li>
<li><a href="/docs/index.html">Documentation</a>
<ul>
<li><a href="https://cwiki.apache.org/confluence/x/yQdG">Using VCL</a></li>
<li><a href="https://cwiki.apache.org/confluence/x/ywdG">Administration</a></li>
<li><a href="/docs/installation.html">Installation</a></li>
</ul>
</li>
<li><a href="https://cwiki.apache.org/confluence/display/VCL/Apache+VCL" target="_blank">Confluence Wiki</a>
  <ul>
      <li></li>
  </ul>
</li>
<li><a href="https://issues.apache.org/jira/browse/VCL" target="_blank">Jira Issue Tracking</a>
  <ul>
      <li></li>
  </ul>
</li>
<li><a href="/comm/index.html">Community</a>
<ul>
<li><a href="/comm/index.html#getInvolved">Getting Involved</a></li>
<li><a href="/comm/index.html#mail-list">Mailing Lists</a></li>
<li><a href="/dev/index.html">Development</a>
<ul>
<li><a href="/dev/code-documentation.html">Code Documentation</a></li>
<li><a href="/dev/roadmap.html">Roadmap</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="http://www.apache.org">Apache Software Foundation</a>
<ul>
<li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
<li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
</ul>
</li>
</ul>
    </div>
    <div id="current-event"> 
      <a  href="https://www.apache.org/events/current-event.html">
        <img src="https://www.apache.org/events/current-event-125x125.png" alt="Apache current event" />
      </a>
    </div>
  </div>
  
  <div id="content">
    <h1 class="title">VCL Release Procedures - 2.3.1 ToDo</h1>
    
	<h1 id="prerequisites-things-that-must-be-done-before-a-release">Prerequisites: Things that must be done before a release</h1>
<ul>
<li><s>all items from the JIRA roadmap for the release must be completed or
moved to a future release</s></li>
<li><s>ALL human readable files must contain the Apache license header
<ul>
<li>this includes style sheets, test code, and documentation - when in
doubt, add a header</li>
<li>files that are part of other software packages that are bundled with
a release must not contain the header (unless that software is also ASF
software) and should be clearly documented as being bundled software</s></li>
</ul>
</li>
<li><s>LICENSE and NOTICE files should be reviewed
<ul>
<li>LICENSE: This file should have the Apache License at the top of it;
any third party artifacts or documents included in the release should
have their licenses included in this file along with a clear explanation
of which files each license applies to.</li>
<li>NOTICE: This file is for additional copyright and attribution
statements any third party licenses may require. A typical NOTICE
document at a minimum includes a copyright and attribution statement for
The Apache Software Foundation. Nothing else belongs in the NOTICE document.</li>
<li>Make sure copyright date is correct in NOTICE file</s></li>
</ul>
</li>
<li><s>Files containing the VCL version should be updated to the version being
released
<ul>
<li>The backend Perl files contain a line defining a $VERSION variable,
this should be updated in every file</s></li>
</ul>
</li>
<li><s>documentation on how to upgrade from a previous release must be created
<ul>
<li>if appropriate, scripts to help users upgrade should be created
(don&rsquo;t forget steps/scripts to upgrade the database schema)</s></li>
</ul>
</li>
<li><s>RELEASE_NOTES file needs to be updated and should contain:</s>
<ul>
<li><s>release version</li>
<li>an intro to VCL</li>
<li>a brief description of the aims of VCL</s></li>
<li><s>a brief roadmap of VCL and how this release fits in to it</s></li>
<li><s>a list of ways for users to get involved</li>
<li>a description of how users can submit issues</s></li>
</ul>
</li>
<li><s>the README file must also contain all dependencies (this includes PHP,
Perl, MySQL versions in addition to perl and php modules, dojo, etc.) for
running VCL, any changes in dependencies since the last release must be
listed in the CHANGLOG file</s></li>
<li><s>generate a CHANGELOG file
<ul>
<li>go to the <a href="https://issues.apache.org/jira/secure/ConfigureReleaseNote.jspa?projectId=12310840&amp;version=12322740">Create Release Notes</a> page of the JIRA site</li>
<li>select the release version</li>
<li>select <strong>text</strong> as the style</li>
<li>click <strong>Create</strong></li>
<li>scroll down to <strong>Edit/Copy Release Notes</strong></li>
<li>copy/paste the contents to a new section in the CHANGELOG file</li>
<li>make sure to add any changes in the dependencies since the last release</s></li>
</ul>
</li>
<li><s>make sure INSTALLATION file is up to date with content from Confluence on
how to install each part</s></li>
<li><s>ensure LICENSE, NOTICE, RELEASE_NOTES, CHANGELOG, INSTALLATION, UPGRADE,
and README files are in top level directory of trunk (or the branch that
will be used for the release)</s></li>
<li><s>an export from HEAD should result in a directory tree with all files and
directories having appropriate permissions</s></li>
<li><s>release manager&rsquo;s GPG signing key must be in KEYS file in toplevel
directory of SVN (one above trunk)</s></li>
<li><s>a release/download page needs to be created for the specific release
containing:
<ul>
<li>link to release artifact (link to a mirror)</li>
<li>link to signatures and checksums (link directly to apache.org)</li>
<li>steps explaining how to verify artifact using signatures and checksums</li>
<li>either a link to release notes or contain them inline</li>
<li>either a link to a change log or contain it inline</s></li>
</ul>
</li>
<li><s>a decision needs to be made determining which, if any, previously released
artifacts should be removed from the main distribution site after this
release is completed</s></li>
<li><s>make sure the index.php file from the web code has the correct VCL
version at the top of it</s></li>
</ul>
<h1 id="steps-to-create-a-release-candidate-artifact">Steps to create a release candidate artifact</h1>
<ul>
<li><s>A tag for the release candidate needs to be created in subversion. It
should be created under the <strong>tags</strong> directory of the repository and should be
named <strong>release-W.X.Y-RCZ</strong> (with Z being the release candidate number, starting
with 1 and with .Y only being included if Y &gt; 0)</li>
<li>export from this tag to get the code for the release candidate</li>
<li>add Dojo Toolkit
<ul>
<li>download and extract most recent (and tested to work with web code)
version of Dojo Toolkit under &lsquo;web&rsquo;</li>
<li>rename extracted dojo directory to just &lsquo;dojo&rsquo;</li>
<li>change to themes directory and run &lsquo;./copydojocss.sh default&rsquo;</li>
<li>update the version listed for Dojo in the README file</li>
</ul>
</li>
<li>remove any VCL perl modules that should not be part of the release</li>
<li>create a tarball of the directory
<ul>
<li>compress it with bzip2</li>
<li>name it apache-VCL-W.X.Y-RCZ-incubating.tar.bz2 (the .Y should only
be included if Y &gt; 0)</li>
</ul>
</li>
<li>create MD5 and SHA-1 sums of the tarball</li>
<li>sign the tarball with GPG
<ul>
<li><a href="http://www.apache.org/dev/release-signing.html#sign-release">This document</a> contains information on how to sign the tarball</li>
</ul>
</li>
<li>distribute the RC through the release manager&rsquo;s personal web space on
people.apache.org (RC are not to be release from the main distribution area
to cut down on archive storage and mirroring bandwidth)</s></li>
</ul>
<h1 id="community-and-pmc-voting-process">Community and PMC voting process</h1>
<ul>
<li><s>release manager should start a <a href="http://www.apache.org/foundation/voting.html#ReleaseVotes">VOTE</a> thread on the dev list; <a href="http://markmail.org/message/ysdor5uddhviawln">this is a
good example</a></li>
<li>the release manage&rsquo;s vote should be posted in a separate message from the
one calling for the vote</li>
<li>the VOTE thread should be ended with a reply post including [RESULT] in the
subject; <a href="http://markmail.org/message/kanwckkfrnbcs2s7">this is a good example</a> except that it is missing the [RESULT] part from
the subject</s></li>
</ul>
<h1 id="steps-to-make-the-rc-available-as-a-release-artifact">Steps to make the RC available as a release artifact</h1>
<ul>
<li><s>create a tag for the release from the approved RC tag (svn copy from RC
tag to new release tag)</li>
<li>create a copy of the approved RC artifact and name it
apache-VCL-X.Y.Z-incubating.tar.bz2 (the .Z should only be included if Z &gt; 0) -
untar old one, rename director to not have RC part, create new tarball</li>
<li>sign the file with GPG</li>
<li>create md5 and sha1 sum files</s></li>
</ul>
<h1 id="steps-to-make-release-artifact-available-to-users">Steps to make release artifact available to users</h1>
<ul>
<li><s>place the release artifact, sums, and signature in
/www/www.apache.org/dist/vcl on people.apache.org</li>
<li>ensure the artifact has permissions 664 and is owned by the vcl group</s></li>
<li>wait 24 hours for the artifact to propagate to the mirrors before
announcing the release
<ul>
<li>ideally, a test download should be done from the mirror and a check
of the sums and signatures should be done</li>
</ul>
</li>
<li>After successfully performing a test download from the mirror,
announcements should be made
<ul>
<li>on the dev@ list</li>
<li>on the user@ list</li>
<li>update currently listed version and download link on <a href="http://vcl.apache.org/downloads/download.cgi">download page</a></li>
</ul>
</li>
<li>Set the newly released version to the Release status in JIRA so that people
will be able to see it as released when reporting bugs
<ul>
<li>Go to the <a href="https://issues.apache.org/jira/browse/VCL#selectedTab=com.atlassian.jira.plugin.system.project%3Aversions-panel">versions page</a> of the JIRA site</li>
<li>click <strong>Manage Versions</strong></li>
<li>mouse over the line of the release version</li>
<li>click the gear menu drop down</li>
<li>click Release and follow the instructions</li>
</ul>
</li>
</ul>
<p><strong>IMPORTANT</strong>: Once a release is copied to the dist location, it <strong>must not be
modified</strong>. This can signal that an attack is being performed. If an error is
found, a new .Z release should be made.</p>


  </div>
  
  <div id="footer">
    <div class="copyright">
      <p>
        Copyright &copy; 2020 The Apache Software Foundation, Licensed under
        the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
        <br />
        Apache and the Apache feather logo are trademarks of The Apache Software Foundation.
      </p>
    </div>
  </div>
  
</body>
</html>
